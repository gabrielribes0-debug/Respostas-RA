<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Modelo de respostas Reclame Aqui</title>

<style>
:root {
  --verde:#0f8a1f;
  --verde-escuro:#0c6f19;
}
body { font-family: Arial, sans-serif; margin:0; background:#f9f9f9; }
header {
  background:var(--verde);
  color:white;
  padding:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header button {
  background:white;
  color:var(--verde);
  border:none;
  padding:6px 12px;
  border-radius:6px;
  cursor:pointer;
}
.container { width:92%; max-width:900px; margin:20px auto; }
.card {
  background:white;
  border:2px solid var(--verde);
  border-radius:8px;
  padding:14px;
  margin-bottom:12px;
}
.card h2 { color:var(--verde); margin:0 0 8px; }
.texto { background:#eee; padding:10px; border-radius:6px; white-space:pre-wrap; }

button {
  margin-top:6px;
  margin-right:4px;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}

.copiar { background:#3498db; color:white; }
.editar { background:#f39c12; color:white; }
.lixo   { background:#e74c3c; color:white; }
.rest   { background:#2ecc71; color:white; }
.del    { background:black; color:white; }

#lixeira { display:none; }
</style>
</head>

<body>

<header>
  <span>Modelos Reclame Aqui</span>
  <button onclick="alternar()">ðŸ—‘ Lixeira</button>
</header>

<div class="container">

<div id="ativos">

<div class="add-form">
  <input id="novoTitulo" placeholder="TÃ­tulo">
  <textarea id="novoTexto" placeholder="Texto"></textarea>
  <button onclick="adicionar()">Adicionar</button>
</div>

<div id="modelos"></div>

</div>

<div id="lixeira">

<h3>Lixeira</h3>
<div id="itensLixeira"></div>

</div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDtXzrWxvy32GL-ioTdv1VbGs6OFRGjts4",
  authDomain: "respostas-reclame-aqui.firebaseapp.com",
  databaseURL: "https://respostas-reclame-aqui-default-rtdb.firebaseio.com",
  projectId: "respostas-reclame-aqui",
  storageBucket: "respostas-reclame-aqui.firebasestorage.app",
  messagingSenderId: "72743051066",
  appId: "1:72743051066:web:c6dd42431fb18ca8d7ba03"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const ativosRef = db.ref("modelos");
const lixoRef = db.ref("lixeira");

function copiar(t){ navigator.clipboard.writeText(t); }

function card(id,titulo,texto,area){
  const div=document.createElement("div");
  div.className="card";

  div.innerHTML=`
    <h2>${titulo}</h2>
    <div class="texto">${texto}</div>

    ${area==="modelos"?`
      <button class="copiar" onclick="copiar(\`${texto}\`)">Copiar</button>
      <button class="editar" onclick="editar('${id}','${titulo}','${texto}')">Editar</button>
      <button class="lixo" onclick="moverLixo('${id}')">Lixeira</button>
    `:`
      <button class="rest" onclick="restaurar('${id}')">Restaurar</button>
      <button class="del" onclick="apagar('${id}')">Excluir</button>
    `}
  `;
  return div;
}

// REALTIME ATIVOS
ativosRef.on("child_added", s=>{
  const d=s.val();
  modelos.prepend(card(s.key,d.titulo,d.texto,"modelos"));
});

ativosRef.on("child_removed", s=>{
  const el=[...modelos.children].find(c=>c.innerHTML.includes(s.key));
  if(el) el.remove();
});

// LIXEIRA
lixoRef.on("child_added", s=>{
  const d=s.val();
  itensLixeira.prepend(card(s.key,d.titulo,d.texto,"lixeira"));
});

lixoRef.on("child_removed", ()=>{
  itensLixeira.innerHTML="";
  lixoRef.once("value", snap=>{
    snap.forEach(s=>{
      const d=s.val();
      itensLixeira.prepend(card(s.key,d.titulo,d.texto,"lixeira"));
    });
  });
});

// FUNÃ‡Ã•ES
function adicionar(){
  if(!novoTitulo.value||!novoTexto.value) return alert("Preencha tudo");
  ativosRef.push({
    titulo:novoTitulo.value,
    texto:novoTexto.value
  });
  novoTitulo.value="";
  novoTexto.value="";
}

function moverLixo(id){
  ativosRef.child(id).once("value", s=>{
    lixoRef.child(id).set(s.val());
    ativosRef.child(id).remove();
  });
}

function restaurar(id){
  lixoRef.child(id).once("value", s=>{
    ativosRef.child(id).set(s.val());
    lixoRef.child(id).remove();
  });
}

function apagar(id){
  if(confirm("Excluir PERMANENTE?")){
    lixoRef.child(id).remove();
  }
}

function editar(id,titulo,texto){
  const t=prompt("Novo tÃ­tulo:",titulo);
  const c=prompt("Novo texto:",texto);
  if(t&&c){
    ativosRef.child(id).set({titulo:t,texto:c});
  }
}

function alternar(){
  ativos.style.display=ativos.style.display==="none"?"block":"none";
  lixeira.style.display=lixeira.style.display==="none"?"block":"none";
}
</script>

</body>
</html>
