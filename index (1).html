<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modelos Reclame Aqui</title>

<style>
:root {
  --verde:#0f8a1f;
  --verde-escuro:#0c6f19;
}

body {
  font-family: Arial, sans-serif;
  margin:0;
  background:#f4f6f5;
}

header {
  background:var(--verde);
  color:white;
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:20px;
}

header button {
  background:white;
  color:var(--verde);
  padding:6px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}

.container {
  width:95%;
  max-width:900px;
  margin:20px auto;
}

.form-box {
  background:white;
  border:2px solid var(--verde);
  padding:15px;
  border-radius:8px;
  margin-bottom:20px;
}

.form-box input,
.form-box textarea {
  width:100%;
  padding:8px;
  margin-bottom:10px;
  border-radius:6px;
  border:1px solid #ccc;
}

.form-box button {
  background:var(--verde);
  color:white;
  border:none;
  border-radius:6px;
  padding:8px 16px;
  cursor:pointer;
}

.card {
  background:white;
  border:2px solid var(--verde);
  border-radius:8px;
  padding:15px;
  margin-bottom:12px;
}

.card h2 {
  margin-top:0;
  color:var(--verde);
}

.texto {
  background:#eee;
  padding:10px;
  border-radius:6px;
  margin-bottom:10px;
  white-space:pre-wrap;
}

.acoes {
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}

.btn {
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
  color:white;
}

.copiar { background:#3498db; }
.editar { background:#f39c12; }
.lixo   { background:#e74c3c; }
.rest   { background:#2ecc71; }
.del    { background:#000; }

#lixeira { display:none; }
</style>
</head>

<body>

<header>
  Modelos Reclame Aqui
  <button onclick="alternar()">ðŸ—‘ Lixeira</button>
</header>

<div class="container">

<div id="ativos">

<div class="form-box">
  <input id="novoTitulo" placeholder="TÃ­tulo">
  <textarea id="novoTexto" rows="4" placeholder="Texto da resposta"></textarea>
  <button onclick="adicionar()">Adicionar modelo</button>
</div>

<div id="modelos"></div>

</div>

<div id="lixeira">
  <h3>Lixeira</h3>
  <div id="itensLixeira"></div>
</div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDtXzrWxvy32GL-ioTdv1VbGs6OFRGjts4",
  authDomain: "respostas-reclame-aqui.firebaseapp.com",
  databaseURL: "https://respostas-reclame-aqui-default-rtdb.firebaseio.com",
  projectId: "respostas-reclame-aqui",
  storageBucket: "respostas-reclame-aqui.firebasestorage.app",
  messagingSenderId: "72743051066",
  appId: "1:72743051066:web:c6dd42431fb18ca8d7ba03"
};

firebase.initializeApp(firebaseConfig);

const db = firebase.database();
const ativosRef = db.ref("modelos");
const lixoRef = db.ref("lixeira");

function copiar(t){ navigator.clipboard.writeText(t); }

function criarCard(id,titulo,texto,area){
  const div=document.createElement("div");
  div.className="card";

  div.innerHTML=`
    <h2>${titulo}</h2>
    <div class="texto">${texto}</div>
    <div class="acoes">
    ${area==="modelos" ? `
      <button class="btn copiar" onclick="copiar(\`${texto}\`)">Copiar</button>
      <button class="btn editar" onclick="editar('${id}','${titulo}','${texto}')">Editar</button>
      <button class="btn lixo" onclick="moverLixo('${id}')">Lixeira</button>
    ` : `
      <button class="btn rest" onclick="restaurar('${id}')">Restaurar</button>
      <button class="btn del" onclick="apagar('${id}')">Excluir</button>
    `}
    </div>
  `;
  return div;
}

// ATIVOS
ativosRef.on("child_added", s=>{
  const d=s.val();
  modelos.prepend(criarCard(s.key,d.titulo,d.texto,"modelos"));
});

ativosRef.on("child_removed", s=>{
  [...modelos.children].forEach(c=>{
    if(c.innerHTML.includes(s.key)) c.remove();
  });
});

// LIXEIRA
lixoRef.on("child_added", s=>{
  const d=s.val();
  itensLixeira.prepend(criarCard(s.key,d.titulo,d.texto,"lixeira"));
});

function adicionar(){
  if(!novoTitulo.value||!novoTexto.value) return alert("Preencha tudo.");
  ativosRef.push({ titulo:novoTitulo.value, texto:novoTexto.value });
  novoTitulo.value=""; novoTexto.value="";
}

function moverLixo(id){
  ativosRef.child(id).once("value", s=>{
    lixoRef.child(id).set(s.val());
    ativosRef.child(id).remove();
  });
}

function restaurar(id){
  lixoRef.child(id).once("value", s=>{
    ativosRef.child(id).set(s.val());
    lixoRef.child(id).remove();
  });
}

function apagar(id){
  if(confirm("Excluir definitivamente?")){
    lixoRef.child(id).remove();
  }
}

function editar(id,titulo,texto){
  let t = prompt("Novo tÃ­tulo:", titulo);
  let c = prompt("Novo texto:", texto);
  if(t && c){
    ativosRef.child(id).set({ titulo:t, texto:c });
  }
}

function alternar(){
  ativos.style.display = ativos.style.display==="none" ? "block" : "none";
  lixeira.style.display = lixeira.style.display==="none" ? "block" : "none";
}
</script>

</body>
</html>
